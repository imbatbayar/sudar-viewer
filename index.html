<!doctype html>
<html lang="mn">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Sudra Viewer</title>
  <style>
    :root{--bg:#0b0b0d;--card:#111116;--text:#f3f3f4;--muted:#a5a5ad;--radius:18px;}
    html,body{height:100%;margin:0;background:var(--bg);color:var(--text);font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;}
    .wrap{height:100%;display:flex;align-items:center;justify-content:center;padding:16px;box-sizing:border-box;}
    .viewer{position:relative;width:min(980px,100%);height:92vh;border:1px solid rgba(255,255,255,.10);border-radius:var(--radius);overflow:hidden;box-shadow:0 18px 60px rgba(0,0,0,.45);background:linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02));}
    .stage{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;padding:22px;box-sizing:border-box;}
    img.page{max-width:100%;max-height:100%;object-fit:contain;border-radius:14px;background:var(--card);box-shadow:0 10px 40px rgba(0,0,0,.45);user-select:none;-webkit-user-drag:none;}
    .topbar{position:absolute;left:14px;right:14px;top:12px;display:flex;align-items:center;justify-content:space-between;gap:12px;padding:10px 12px;border-radius:14px;background:rgba(0,0,0,.35);border:1px solid rgba(255,255,255,.10);backdrop-filter:blur(8px);}
    .title{font-size:13px;color:var(--muted);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}
    .controls{display:flex;align-items:center;gap:8px;flex-wrap:wrap;}
    button{appearance:none;border:1px solid rgba(255,255,255,.18);background:rgba(255,255,255,.06);color:var(--text);padding:8px 10px;border-radius:12px;cursor:pointer;font-weight:650;font-size:12px;}
    button:active{transform:translateY(1px);}
    .counter{font-size:12px;color:var(--muted);min-width:64px;text-align:right;}
    @media (max-width:520px){.title{display:none;}.counter{min-width:auto;}}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="viewer" id="viewer">
      <div class="topbar">
        <div class="title">üìú –°—É–¥–∞—Ä ‚Äî –¥—ç—ç—à/–¥–æ–æ—à –≥“Ø–π–ª–≥—ç—ç–¥ —Ö—É—É–¥–∞—Å —Å–æ–ª–∏–≥–¥–æ–Ω–æ</div>
        <div class="controls">
          <button id="prev" type="button">‚¨Ü ”®–º–Ω”©—Ö</button>
          <button id="next" type="button">‚¨á –î–∞—Ä–∞–∞—Ö</button>
          <div class="counter" id="counter">1 / 1</div>
        </div>
      </div>

      <div class="stage">
        <img class="page" id="pageImg" alt="Sudra page" />
      </div>
    </div>
  </div>

  <script>
    // ‚úÖ –î–ê–†–ê–ê –ù–¨ pages/ —Ö–∞–≤—Ç–∞—Å–∞–Ω–¥ –∑—É—Ä–≥–∞–∞ —è–≥ —ç–Ω—ç –Ω—ç—Ä—ç—ç—Ä –±–∞–π—Ä–ª—É—É–ª–Ω–∞
    const PAGES = [
    "158.jpg",
    "159.jpg",
    "160.jpg",
    "161.jpg",
    "162.jpg",
                  ];


    const img = document.getElementById("pageImg");
    const counter = document.getElementById("counter");
    const prevBtn = document.getElementById("prev");
    const nextBtn = document.getElementById("next");
    const viewer = document.getElementById("viewer");

    let i = 0;
    let lock = false;

    function render() {
      img.src = PAGES[i];
      counter.textContent = `${i+1} / ${PAGES.length}`;
      prevBtn.disabled = i === 0;
      nextBtn.disabled = i === PAGES.length - 1;
    }

    function go(delta){
      if (lock) return;
      const ni = i + delta;
      if (ni < 0 || ni >= PAGES.length) return;

      lock = true;

      img.style.transition = "transform 160ms ease, opacity 160ms ease";
      img.style.opacity = "0.0";
      img.style.transform = `translateY(${delta>0 ? "-18px":"18px"})`;

      setTimeout(() => {
        i = ni;
        render();
        img.style.transform = `translateY(${delta>0 ? "18px":"-18px"})`;
        setTimeout(() => {
          img.style.opacity = "1";
          img.style.transform = "translateY(0)";
          setTimeout(()=>{ lock = false; }, 50);
        }, 10);
      }, 160);
    }

    prevBtn.addEventListener("click", ()=>go(-1));
    nextBtn.addEventListener("click", ()=>go(1));

    // wheel/trackpad
    let wheelAccum = 0;
    let wheelTimer = null;
    viewer.addEventListener("wheel", (e)=>{
      e.preventDefault();
      wheelAccum += e.deltaY;
      clearTimeout(wheelTimer);
      wheelTimer = setTimeout(()=>{ wheelAccum = 0; }, 120);

      const TH = 120;
      if (wheelAccum > TH) { wheelAccum = 0; go(1); }
      if (wheelAccum < -TH){ wheelAccum = 0; go(-1); }
    }, {passive:false});

    // touch swipe
    let y0 = null;
    viewer.addEventListener("touchstart", (e)=>{ y0 = e.touches[0].clientY; }, {passive:true});
    viewer.addEventListener("touchend", (e)=>{
      if (y0 === null) return;
      const y1 = (e.changedTouches && e.changedTouches[0]) ? e.changedTouches[0].clientY : y0;
      const dy = y1 - y0;
      y0 = null;
      const TH = 40;
      if (dy > TH) go(-1);
      else if (dy < -TH) go(1);
    }, {passive:true});

    render();
  </script>
</body>
</html>
